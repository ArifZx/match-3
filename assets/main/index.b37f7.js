System.register("chunks:///main.js",["cc"],(function(){"use strict";var e,t,i,n,o,r,s,a,l,c,u,h,p,f,d,v,g,b,m,E,T,y;return{setters:[function(w){e=w.cclegacy,t=w._decorator,i=w.EventTarget,n=w.Component,o=w.instantiate,r=w.Enum,s=w.Sprite,a=w.SpriteFrame,l=w.Prefab,c=w.AnimationClip,u=w.Node,h=w.UITransform,p=w.AnimationComponent,f=w.Label,d=w.Vec3,v=w.resources,g=w.assetManager,b=w.find,m=w.path,E=w.tween,T=w.Vec2,y=w.Button}],execute:function(){function w(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function M(e,t,i,n,o){var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var S,A,O;e._RF.push({},"a826eQ/3t9PApZXcT2ncZiB","BoardEnums",void 0),function(e){e[e.PREPARING=0]="PREPARING",e[e.READY_FOR_MOVE=1]="READY_FOR_MOVE",e[e.POPPING=2]="POPPING",e[e.SPAWNING_NEW_TILES=3]="SPAWNING_NEW_TILES"}(S||(S={})),e._RF.pop(),e._RF.push({},"1ea57CbwLxPB7cSic0eV6lb","PoolComponent",void 0);var N=t.ccclass,_=(t.property,N("PoolComponent")(((O=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).eventTarget=new i,t}R(t,e);var n=t.prototype;return n.remove=function(e){void 0===e&&(e=!0),e&&this.node.removeFromParent(),this.eventTarget.emit(t.EventType.REMOVE,this)},n.pick=function(){this.eventTarget.emit(t.EventType.PICK,this)},t}(n)).EventType={REMOVE:"remove-pool",PICK:"pick-pool"},A=O))||A);e._RF.pop(),e._RF.push({},"7c361JWEoFNEJkhRiUztGrs","PoolManager",void 0);var k,D,F,U,z,I,V,G,x,Y,B,H,W,K,j,X,q,J,Z=function(){function e(){this.prefab=null,this.pool=[]}var t=e.prototype;return t.testPoolComponent=function(e){var t=e.getComponent(_);return t||e.addComponent(_)},t.addToPool=function(e){this.pool.push(e)},t.pickOne=function(){if(!this.pool.length){var e,t=this.spawnObject();return null==(e=t.getComponent(_))||e.pick(),t}return this.pool.shift()},t.spawnObject=function(){var e=this;if(!this.prefab)throw new Error("Please initialize prefab pool");var t=o(this.prefab),i=this.testPoolComponent(t);return i.eventTarget.on(_.EventType.REMOVE,(function(t){e.addToPool(t)})),i.eventTarget.on(_.EventType.PICK,(function(t){var i=e.pool.indexOf(t);i<0||e.pool.splice(i,1)})),t},e}();e._RF.pop(),e._RF.push({},"a2e75wGa1xOT7JfbaQ3PFt9","TileEnums",void 0),function(e){e[e.BLUE=0]="BLUE",e[e.GREEN=1]="GREEN",e[e.GREY=2]="GREY",e[e.PINK=3]="PINK",e[e.RED=4]="RED",e[e.YELLOW=5]="YELLOW"}(k||(k={})),r(k),function(e){e[e.NORMAL=0]="NORMAL",e[e.PUSHED=1]="PUSHED",e[e.SELECTED=2]="SELECTED",e[e.MATCHED=3]="MATCHED"}(D||(D={})),r(D),e._RF.pop(),e._RF.push({},"bb3ec6e08dPZZthXHkBHle8","TileComponent",void 0);var Q,$,ee,te,ie,ne,oe,re,se,ae,le,ce,ue,he,pe,fe,de=t.ccclass,ve=t.property,ge=t.requireComponent,be=(F=de("TileComponent"),U=ge(s),z=ve({type:k}),I=ve({type:D}),V=ve(a),G=ve(a),x=ve(l),Y=ve([c]),F(B=U((W=M((H=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return L(t=e.call.apply(e,[this].concat(n))||this,"type",W,C(t)),L(t,"state",K,C(t)),L(t,"baseSprite",j,C(t)),L(t,"pushedSprite",X,C(t)),L(t,"connect",q,C(t)),t.connectNode=null,t.sprite=void 0,t.label=null,L(t,"animClips",J,C(t)),t.row=-1,t.col=-1,t.mark=0,t}R(t,e);var i=t.prototype;return i.onLoad=function(){this.sprite=this.getComponent(s),this.getFXNode(),this.setState(this.state),this.initializeConnect()},i.start=function(){},i.getBoardID=function(){return this.row*Math.pow(10,3)+this.col},i.reset=function(){this.row=-1,this.col=-1,this.resetState(),this.showConnect(!1)},i.resetState=function(){this.setState(D.NORMAL)},i.getFXNode=function(){var e=this.node.getChildByName("FX");if(!e){(e=new u).name="FX",e.setParent(this.node),e.layer=this.node.layer;var t=e.addComponent(h);t.setContentSize(88,98),t.setAnchorPoint(.5,.5),e.addComponent(s);var i=e.addComponent(p);this.animClips.forEach((function(e){i.addClip(e)}))}return e},i.initializeConnect=function(){if(this.connect){var e=o(this.connect);e.name="connect",e.setParent(this.node),this.connectNode=e,this.showConnect(!1)}},i.initializeLabel=function(){var e=new u("label");e.setParent(this.node),e.layer=this.node.layer;var t=e.addComponent(f);this.label=t,this.setMark()},i.setMark=function(e){var t;if(void 0===e&&(e=this.mark),this.mark!==e&&void 0!==e&&(this.mark=e),null!=(t=this.label)&&t.node.isValid){var i=-1===e?"ðŸ’¡":0===e?"":this.mark.toString();this.label.string=i}},i.setLabelStr=function(e){var t;null!=(t=this.label)&&t.node.isValid&&(this.label.string=e)},i.connectPreviousTile=function(e,t){var i;if(void 0===t&&(t=!0),null!=e&&null!=(i=e.node)&&i.isValid){this.showConnect(t);var n=e.node,o=new d;d.subtract(o,n.position,this.node.position),d.normalize(o,o);var r=Math.atan2(o.y,o.x);this.rotateConnect(180*r/Math.PI-90)}else this.showConnect(!1)},i.showConnect=function(e){void 0===e&&(e=!0);var t=this.connectNode;t&&t.isValid&&(t.active=e)},i.rotateConnect=function(e){var t=this.connectNode;t&&t.isValid&&t.setRotationFromEuler(0,0,e)},i.setState=function(e){var t,i,n=this.getFXNode(),o=n.getComponent(p);switch(e===D.MATCHED?n.setPosition(-4,0,0):n.setPosition(0,0,0),n.active=e>1,e){case D.MATCHED:o.play((null==(t=o.clips[1])?void 0:t.name)||"");break;case D.SELECTED:o.play((null==(i=o.clips[0])?void 0:i.name)||"");break;case D.PUSHED:this.sprite.spriteFrame=this.pushedSprite;break;default:this.sprite.spriteFrame=this.baseSprite}this.state=e},t}(n)).prototype,"type",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.GREY}}),K=M(H.prototype,"state",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.NORMAL}}),j=M(H.prototype,"baseSprite",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=M(H.prototype,"pushedSprite",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=M(H.prototype,"connect",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=M(H.prototype,"animClips",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=H))||B)||B);e._RF.pop(),e._RF.push({},"2272dYMsvpCqrzNl6Jot7DB","TileManager",void 0);var me=t.ccclass,Ee=t.property,Te=t.executionOrder,ye=(Q=me("TileManager"),$=Te(0),ee=Ee(l),te=Ee(l),ie=Ee(l),ne=Ee(l),oe=Ee(l),re=Ee(l),Q(se=$((le=M((ae=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).tileAssets={},L(t,"blue",le,C(t)),L(t,"grey",ce,C(t)),L(t,"green",ue,C(t)),L(t,"pink",he,C(t)),L(t,"red",pe,C(t)),L(t,"yellow",fe,C(t)),t.pools={},t}R(t,e);var i,n,o,r=t.prototype;return r.onLoad=function(){var e=this;this.tileAssets[k.BLUE]="BLUE",this.tileAssets[k.GREEN]="Green",this.tileAssets[k.GREY]="GREY",this.tileAssets[k.PINK]="PINK",this.tileAssets[k.RED]="RED",this.tileAssets[k.YELLOW]="YELLOW",Object.keys(this.tileAssets).forEach((function(t){var i=new Z;i.prefab=e.getPrefab(+t),e.pools[+t]=i}))},r.assetKey=function(e){return"Tile_"+k[e]},r.getAssetKey=function(e,t){void 0===t&&(t=0);var i=this.tileAssets[e];return 0===t?i:1===t?i.toUpperCase():i.toLowerCase()},r.parseTile=function(e){return"images/"+this.tileAssets[e]+"/spriteFrame"},r.loadAssets=function(){var e=this;Object.keys(this.tileAssets).forEach((function(t){var i=e.parseTile(t);v.get(i,a)||v.load(i,a,(function(i,n){i||g.assets.add(e.assetKey(+t),n)}))}))},r.getPrefab=function(e){var t=this.grey;switch(e){case k.BLUE:t=this.blue;break;case k.GREY:t=this.grey;break;case k.GREEN:t=this.green;break;case k.PINK:t=this.pink;break;case k.RED:t=this.red;break;case k.YELLOW:t=this.yellow}return t},r.spawnRandomTile=function(e){var t;for(void 0===e&&(e=[k.GREY]);!t||!k[t]||-1!==e.indexOf(t);)t=Math.floor(6*Math.random());return this.spawnTile(t)},r.spawnTile=function(e){var t=this.pools[e];if(!t)throw new Error("Tile not found");var i=t.pickOne();return i.name="Tile",i.getComponent(be)},i=t,o=[{key:"instance",get:function(){var e,i=null==(e=b(m.join("TileManager")))?void 0:e.getComponent(t);if(!i)throw new Error("Add TileManager on scene first");return i}}],(n=null)&&w(i.prototype,n),o&&w(i,o),Object.defineProperty(i,"prototype",{writable:!1}),t}(n)).prototype,"blue",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=M(ae.prototype,"grey",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=M(ae.prototype,"green",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=M(ae.prototype,"pink",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=M(ae.prototype,"red",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=M(ae.prototype,"yellow",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=ae))||se)||se);e._RF.pop(),e._RF.push({},"4a297IPpxVMqrWACKwt4Iua","BoardUtil",void 0);var we,Re=72.5,Pe=85;function Ce(e,t,i,n,o){void 0===i&&(i={x:0,y:0}),void 0===n&&(n=Re),void 0===o&&(o=Pe);var r=t.col*n/2-n/2,s=o/2;return i.x=e.col*n-r,i.y=e.row*o+(e.col%2==1?o/2:0)+s,i}function Le(e,t,i,n,o){void 0===i&&(i={row:0,col:0}),void 0===n&&(n=Re),void 0===o&&(o=Pe);var r=t.col*n/2-n/2,s=o/2,a=Math.round((e.x+r)/n);0===a&&(a=0);var l=Math.round((e.y-((a%2==1?o/2:0)+s))/o);return 0===l&&(l=0),i.col=a,i.row=l,i}function Me(e,t){return e.row*t.col+e.col}function Se(e,t,i){return void 0===i&&(i=!0),function(e,t,i,n,o){void 0===o&&(o=!0);var r,s=n-t,a=i-e;r=o===(t%2==0)?Ve:Ge;for(var l=!1,c=1,u=0,h=0;c<r.length;c+=2)if(u=r[c-1],h=r[c],u===a&&h===s){l=!0;break}return l}(e.row,e.col,t.row,t.col,i)}!function(e){e[e.U=0]="U",e[e.UR=1]="UR",e[e.DR=2]="DR",e[e.D=3]="D",e[e.DL=4]="DL",e[e.UL=5]="UL"}(we||(we={}));var Ae,Oe,Ne,_e,ke,De,Fe,Ue,ze,Ie,Ve=[1,0,0,1,-1,1,-1,0,-1,-1,0,-1],Ge=[1,0,1,1,0,1,-1,0,0,-1,1,-1];function xe(e,t,i){void 0===i&&(i=!0);var n,o=[];n=i===(e.col%2==0)?Ve:Ge;var r=[];!function(e,t,i){void 0===i&&(i=[]);var n=t.row/2,o=t.col/2,r=e.row-n,s=e.col-o;r<0&&s<0?i.push(we.U,we.D,we.UR,we.DR,we.UL,we.DL):r<0&&s>0?i.push(we.U,we.D,we.UL,we.DL,we.UR,we.DR):r>0&&s<0?i.push(we.D,we.U,we.DR,we.UR,we.DL,we.UL):r>0&&s>0?i.push(we.D,we.U,we.DL,we.UL,we.DR,we.UR):i.push(we.U,we.UR,we.DR,we.D,we.DL,we.UL)}(e,t,r);for(var s=0,a=0,l=0,c=0;s<r.length;s++)if(l=n[2*(a=r[s])]+e.row,c=n[2*a+1]+e.col,!(l<0||c<0||l>=t.row||c>=t.col)){var u=Me({row:l,col:c},t);o.push(t.tiles[u])}return o}e._RF.pop(),e._RF.push({},"db39cdbnalPsphRK09/h0sU","BoardComponent",void 0);var Ye,Be=t.ccclass,He=t.property,We=t.executionOrder;Ae=Be("BoardComponent"),Oe=We(1),Ne=He({min:0}),_e=He({min:0}),ke=He(u),Ae(De=Oe((Ue=M((Fe=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return L(t=e.call.apply(e,[this].concat(o))||this,"row",Ue,C(t)),L(t,"col",ze,C(t)),L(t,"moveTargetNode",Ie,C(t)),t.positions=[],t.tiles=[],t.selectedTiles=[],t.transform=void 0,t.state=S.PREPARING,t.eventTarget=new i,t}R(t,e);var n=t.prototype;return n.onLoad=function(){this.transform=this.getComponent(h),this.initialize()},n.initialize=function(){this.positions=function(e,t,i,n){void 0===i&&(i=Re),void 0===n&&(n=Pe);for(var o=t*i/2-i/2,r=n/2,s=[],a=0;a<e;a++)for(var l=0;l<t;l++){0===l&&(s[a]=[]);var c=l*i-o,u=a*n+(l%2==1?n/2:0)+r;s[a][l]={x:c,y:u}}return s}(this.row,this.col),this.initTiles(),this.setupTouchEvents(),this.setupEvents(),this.state=S.READY_FOR_MOVE},n.setupEvents=function(){var e=this;this.eventTarget.on("on-change-state",(function(t){t===S.SPAWNING_NEW_TILES&&e.dropTiles()}))},n.dropTiles=function(){for(var e,t=this,i=0,n=0,o=0;o<this.col;o++){i=0;for(var r=0;r<this.row;r++){var s;if(n=Me({row:r,col:o},this),null==(s=e=this.tiles[n])||s.setMark(0),e?i&&this.moveTile(e,{col:o,row:e.row-i}):i++,r===this.row-1)for(var a=i-1;a>=0;a--)this.spawnTile({row:r-a,col:o})}}this.scheduleOnce((function(){t.setState(S.READY_FOR_MOVE)}),1.5)},n.initTiles=function(){this.tiles.forEach((function(e){var t;null==(t=e.getComponent(_))||t.remove(!0)}));for(var e=0;e<this.positions.length;e++)for(var t=0;t<((null==(i=this.positions[e])?void 0:i.length)||0);t++){var i,n=ye.instance.spawnRandomTile(),o=this.positions[e][t];n.row=e,n.col=t,n.node.setPosition(o.x,o.y),n.node.setParent(this.node);var r=Me({row:e,col:t},this);this.tiles[r]=n}},n.setState=function(e){this.state=e,this.eventTarget.emit("on-change-state",e,this)},n.getLocalPosFromTouch=function(e,t,i){i.getUILocation(t),e.set(t.x,t.y,0),this.node.inverseTransformPoint(e,e)},n.selectTile=function(e,t){if(void 0===t&&(t=!1),t||this.state===S.READY_FOR_MOVE){var i=Me(e,this),n=this.tiles[i],o=this.selectedTiles[this.selectedTiles.length-1];if(n&&null!=n&&n.node.isValid&&n!==o){if(o){if(n.type!==o.type)return;if(!Se(o,n))return;if(this.selectedTiles[this.selectedTiles.length-2]===n)return this.selectedTiles.splice(-1),o.setState(D.NORMAL),o.showConnect(!1),o.node.setSiblingIndex(0),n.node.removeFromParent(),this.node.addChild(n.node),void(2===this.selectedTiles.length&&this.selectedTiles.forEach((function(e){return e.setState(D.SELECTED)})))}if(-1===this.selectedTiles.indexOf(n)){this.selectedTiles.push(n),n.connectPreviousTile(o),n.node.removeFromParent(),this.node.addChild(n.node),n.setState(D.PUSHED);var r=this.selectedTiles.length>=3;3===this.selectedTiles.length&&this.selectedTiles.forEach((function(e){return e.setState(D.MATCHED)})),n.setState(r?D.MATCHED:D.SELECTED)}}}},n.animMoveTiles=function(e,t){var i=this;this.setState(S.POPPING);var n=d.ONE.clone().multiplyScalar(.5);e.forEach((function(e,o,r){E(e.node).to(1+.03*o*Math.random(),{position:t,scale:n},{easing:"backIn",onStart:function(){var t=Me(e,i);i.tiles[t]=void 0,e.showConnect(!1)},onComplete:function(){e.reset();var t=e.node.getComponent(_);t&&(t.remove(!0),o===r.length-1&&i.setState(S.SPAWNING_NEW_TILES))}}).start()}))},n.finishSelect=function(){if(this.selectedTiles.length<3)this.clearSelectedTiles();else{var e=this.moveTargetNode.worldPosition.clone();this.node.inverseTransformPoint(e,e),this.animMoveTiles(this.selectedTiles.splice(0),e)}},n.clearSelectedTiles=function(){for(;this.selectedTiles.length;){var e=this.selectedTiles.pop();null==e||e.setState(D.NORMAL),null==e||e.showConnect(!1)}},n.setupTouchEvents=function(){var e=this,t=new T,i=new d,n={row:0,col:0};this.node.on(u.EventType.TOUCH_START,(function(o){e.getLocalPosFromTouch(i,t,o),Le(i,e,n),e.selectTile(n)})),this.node.on(u.EventType.TOUCH_MOVE,(function(o){e.getLocalPosFromTouch(i,t,o),Le(i,e,n),e.selectTile(n)})),this.node.on(u.EventType.TOUCH_END,(function(t){e.finishSelect()})),this.node.on(u.EventType.TOUCH_CANCEL,(function(e){}))},n.spawnTile=function(e,t,i){var n,o;null==(n=o=void 0!==t?ye.instance.spawnTile(k.BLUE):ye.instance.spawnRandomTile())||n.setMark(0);var r=Ce({row:this.row+2,col:e.col},this);o.node.setPosition(r.x,r.y,0),o.node.setScale(1,1,1),o.node.setParent(this.node),this.moveTile(o,e,.5,"circIn",i)},n.moveTile=function(e,t,i,n,o){var r=this;void 0===i&&(i=.5),void 0===n&&(n="backIn");var s={x:0,y:0};Ce(t,this,s);var a=new d(s.x,s.y,0);E(e.node).to(i,{position:a},{easing:n,onComplete:function(){var i=Me(t,r);r.tiles[i]=e,e.row=t.row,e.col=t.col,"function"==typeof o&&o()}}).start()},n.shuffle=function(e){var t=this;if(this.state===S.READY_FOR_MOVE){var i=e.target,n=i instanceof u&&(null==i?void 0:i.getComponent(y));null!=n&&n.node.isValid&&(n.interactable=!1),this.setState(S.PREPARING),this.tiles=this.tiles.sort((function(e,t){return.5-Math.random()})),this.clearSelectedTiles(),this.tiles.forEach((function(e,i){var n=function(e,t,i){return{row:Math.floor(e/t),col:e%i}}(i,t.row,t.col);t.moveTile(e,n,.5,"linear")})),this.scheduleOnce((function(){null!=n&&n.node.isValid&&(n.interactable=!0),t.setState(S.READY_FOR_MOVE)}),.6)}},n.solve=function(e){var t=this;if(this.state===S.READY_FOR_MOVE){var i=e.target,n=i instanceof u&&(null==i?void 0:i.getComponent(y));null!=n&&n.node.isValid&&(n.interactable=!1),this.setState(S.PREPARING),this.clearSelectedTiles(),this.getLongestTiles(!0).forEach((function(e){return t.selectTile(e,!0)})),this.finishSelect(),this.scheduleOnce((function(){null!=n&&n.node.isValid&&(n.interactable=!0),t.setState(S.READY_FOR_MOVE)}),1)}},n.getLongestTiles=function(e,t,i){if(void 0===t&&(t=13),void 0===i&&(i=0),i>=t)return[];var n=[];return this.getPossiblePath(this.tiles[Math.floor(Math.random()*this.tiles.length)],n,e),n.sort((function(e,t){return t.length-e.length})),n[0].length<3?this.getLongestTiles(e,t,i+1):n[0]},n.getPossiblePath=function(e,t,i){void 0===t&&(t=[]),this.tiles.forEach((function(e){return e.setMark(0)}));var n=this.getMatchTiles(e),o=this.getLeaves(n);o.length<=0&&o.push(n[Math.floor(Math.random()*n.length)]);var r=[];this.backtrackTiles(o[Math.floor(Math.random()*o.length)],r);var s=this.connectTiles(r[0]);return t.push(s),t},n.getMatchTiles=function(e){for(var t=new Set,i=[e],n=e;i.length;)(n=i.shift()).setLabelStr(("0"+(10*n.row+n.col)).slice(-2)),t.add(n),this.getTileNeighbors(n).forEach((function(e){e&&e.type===n.type&&!t.has(e)&&i.push(e)}));return Array.from(t.values())},n.findLongestPath=function(e,t,i,n,o){if(void 0===n&&(n=0),void 0===o&&(o=[]),e.setMark(i),e.type!==t.type)return n;var r=Me(e,this);if(o[r]=!0,e===t)return Math.max(i,n);for(var s=this.getTileNeighbors(e),a=0;a<s.length;a++)s[a]&&s[a].type===e.type&&!o[Me(s[a],this)]&&(n=this.findLongestPath(s[a],t,i+1,n,o));return o[r]=!1,n},n.findLongestPathV2=function(e,t){if(void 0===t&&(t=e),!e||t.type!==e.type)return 0;if(-1!==e.mark)return e.mark;for(var i=this.getTileNeighbors(e),n=new Array(i.length).fill(-1),o=0,r=null;i.length,r=i[o];o++)r&&r.type===e.type&&(n[o]=1+this.findLongestPathV2(r,t));return e.setMark(Math.max.apply(Math,n)),e.mark},n.backtrackTiles=function(e,t,i,n,o){var r=this;void 0===i&&(i=Number.MAX_SAFE_INTEGER),void 0===n&&(n=1),void 0===o&&(o=[]);var s=Me(e,this);if(!o[s]){o[s]=!0,e.setMark(n);var a=t[0];(!a||n>=a.mark)&&(t[0]=e),n>=i-1||(this.getTileNeighbors(e).filter((function(t){return t&&t.type===e.type&&!o[Me(t,r)]})).forEach((function(e){r.backtrackTiles(e,t,i,n+1,o)})),o[s]=!1)}},n.getLeaves=function(e){var t=this,i=e[0];if(!i)return[];var n=new Set;return e.forEach((function(e){t.getTileNeighbors(e).filter((function(e){return e&&e.type===i.type})).length<=1&&n.add(e)})),Array.from(n.values())},n.connectTiles=function(e){for(var t=this,i=[e],n=[e],o=function(){var e=n.pop(),o=t.getTileNeighbors(e).filter((function(t){return t&&t.type===e.type&&t.mark===e.mark-1}))[0];o&&(i.push(o),n.push(o))};n.length;)o();return i},n.printTilesMark=function(){for(var e=0;e<this.row;e++){for(var t=[],i=0;i<this.col;i++){var n=Me({row:e,col:i},this),o=this.tiles[n];o&&t.push(o)}console.log(t.map((function(e){return e.mark})).join("\t"))}},n.getTileNeighbors=function(e){return xe(e,this)},t}(n)).prototype,"row",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ze=M(Fe.prototype,"col",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ie=M(Fe.prototype,"moveTargetNode",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=Fe))||De);e._RF.pop(),e._RF.push({},"c57e5X/AhZCi7yaSFiqtNKg","common",void 0),e._RF.pop(),e._RF.push({},"84087VNPtlKApmlfemq4w1g","SpritePoolManager",void 0);var Ke,je,Xe,qe,Je,Ze,Qe,$e,et,tt,it=t.ccclass;t.property,it("SpritePoolManager")(Ye=function(e){function t(){return e.apply(this,arguments)||this}R(t,e);var i=t.prototype;return i.start=function(){},i.update=function(e){},t}(n));e._RF.pop(),e._RF.push({},"b119154aJtG6474xqBn3RBW","HexaBoardTest",void 0);var nt=t.ccclass,ot=t.property,rt=t.executeInEditMode;Ke=nt("hexrow"),je=rt(!0),Xe=ot(l),qe=ot({min:0}),Je=ot({min:0}),Ke(Ze=je(($e=M((Qe=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return L(t=e.call.apply(e,[this].concat(n))||this,"prefab",$e,C(t)),L(t,"cols",et,C(t)),L(t,"rows",tt,C(t)),t.childs=[],t.gapY=85,t.gapX=72.5,t}R(t,e);var i=t.prototype;return i.onLoad=function(){this.initialize()},i.initialize=function(){var e=this.cols*this.gapX/2-this.gapX/2,t=this.gapY/2;this.node.destroyAllChildren();for(var i=0;i<this.rows;i++)for(var n=0;n<this.cols;n++){var o=ye.instance.spawnRandomTile().node,r=n*this.gapX-e,s=i*this.gapY+(n%2==1?this.gapY/2:0)+t;o.setPosition(r,s),o.setParent(this.node)}},t}(n)).prototype,"prefab",[Xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=M(Qe.prototype,"cols",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),tt=M(Qe.prototype,"rows",[Je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ze=Qe))||Ze);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});